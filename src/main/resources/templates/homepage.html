<!-- homepage.html -->
<!doctype html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/extras/spring-security">

<head th:replace="fragments/head :: common-head('Email-Claim Automation')"></head>

<body>
<div th:replace="fragments/header :: main-header"></div>
<div th:replace="fragments/nav :: main-nav"></div>

<main>

        <!-- ðŸ“Š Analytics Panel -->
        <section id="panel-analytics" class="panel active">
            <!-- âœ… Reuse your existing REPORTS PANEL HTML -->
            <h2>Claim Statistics Overview</h2>
            <div th:replace="fragments/report-section :: report-section"></div>
        </section>

        <!-- ðŸ“œ History Panel -->
        <section id="panel-history" class="panel">
            <h2>Claim History</h2>
            <div th:replace="fragments/claim-history :: claim-history"></div>
        </section>

        <!-- âž• Report Loss Panel -->
        <section id="panel-report" class="panel">
            <div th:replace="fragments/claim-form :: claim-form"></div>
        </section>

        <section id="panel-admin" class="panel">
            <div th:replace="fragments/admin-scheduler-controls :: adminSchedulerFragment"></div>
        </section>

        <div id="mask"><div></div></div>

</main>

<div th:replace="fragments/footer :: main-footer"></div>

<script src="/js/auth.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const token = Auth.getToken();
        if (!token) {
            window.location.href = "/login";
            return;
        }
        /*if (!Auth.isAdmin()) {
            document.getElementById("panel-analytics").style.display = "none";
            document.getElementById("panel-history").style.display = "none";
        }*/
    });
</script>
<!-- Chatbot UI -->
<div id="chatbot-container"></div>

<!-- Load chatbot script -->
<script src="/js/chatbot.js"></script>
<div id="toast-container"></div>
<div id="confirm-modal" class="confirm-backdrop hidden">
    <div class="confirm-box">
        <p id="confirm-text"></p>
        <div class="confirm-actions">
            <button id="confirm-yes">Yes</button>
            <button id="confirm-no">No</button>
        </div>
    </div>
</div>
</body>
</html>